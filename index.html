<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Avaliação de Inflamação</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #fef7f0 0%, #fff5f8 50%, #f8f0ff 100%);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 700px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      margin: 0 auto;
      padding: 40px;
      border-radius: 24px;
      box-shadow:
        0 20px 40px rgba(176, 53, 116, 0.1),
        0 8px 16px rgba(0, 0, 0, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
      animation: fadeIn 0.8s ease;
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 4px;
      background: linear-gradient(90deg, #b03574, #d4567a, #b03574);
      animation: shimmer 3s ease-in-out infinite;
    }

    @keyframes shimmer { 0%,100%{opacity:1} 50%{opacity:.7} }

    .logo {
      display: block;
      margin: 0 auto 30px;
      max-width: 200px;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,.1));
    }

    h1 {
      text-align: center;
      color: #b03574;
      font-weight: 700;
      font-size: 2.2rem;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #b03574, #d4567a);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      text-align: center;
      color: #666;
      font-size: 1.1rem;
      margin-bottom: 30px;
      font-weight: 400;
    }

    /* ==== NOVO: mesmos cards de checkbox usados nos hábitos ==== */
    .checkbox-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }
    .checkbox-item {
      background: rgba(255,255,255,.8);
      border: 2px solid rgba(176,53,116,.1);
      border-radius: 16px;
      padding: 16px 20px;
      cursor: pointer;
      position: relative;
      transition: all .3s ease;
      overflow: hidden;
    }
    .checkbox-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(176,53,116,.15);
      border-color: rgba(176,53,116,.3);
    }
    .checkbox-item.selected {
      background: linear-gradient(135deg, #b03574, #d4567a);
      color: #fff;
      border-color: #b03574;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(176,53,116,.3);
    }
    .checkbox-item input { display: none; }
    .checkbox-item .checkmark {
      position: absolute;
      top: 10px; right: 10px;
      width: 20px; height: 20px;
      border: 2px solid #ddd;
      border-radius: 50%;
      transition: all .3s ease;
      background: transparent;
    }
    .checkbox-item.selected .checkmark {
      background: #fff;
      border-color: #fff;
    }
    .checkbox-item.selected .checkmark::after {
      content: '✓';
      position: absolute; top: 50%; left: 50%;
      transform: translate(-50%,-50%);
      color: #b03574; font-weight: 800; font-size: 12px;
    }

    button {
      background: linear-gradient(135deg, #b03574, #d4567a);
      color: white; border: none;
      padding: 18px 32px; font-size: 18px;
      border-radius: 50px; width: 100%;
      margin-top: 30px; cursor: pointer; font-weight: 600;
      transition: all .3s ease;
      box-shadow: 0 6px 20px rgba(176,53,116,.3);
      position: relative; overflow: hidden;
    }
    button::before {
      content: ''; position: absolute; top: 0; left: -100%;
      width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.2), transparent);
      transition: left .5s ease;
    }
    button:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(176,53,116,.4); }
    button:hover::before { left: 100%; }
    button:active { transform: translateY(0); }

    .result {
      margin-top: 30px;
      background: linear-gradient(135deg, rgba(255,240,244,.9), rgba(255,245,248,.9));
      border: 1px solid rgba(176,53,116,.2);
      border-left: 5px solid #b03574;
      padding: 25px; border-radius: 16px;
      backdrop-filter: blur(10px);
      animation: fadeInUp .5s ease;
    }
    @keyframes fadeInUp { from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:translateY(0)} }

    .promo-text { text-align: center; margin-top: 40px; animation: fadeInUp .6s ease .2s both; }
    .promo-text p { font-size: 1.3rem; font-weight: 600; color: #b03574; margin-bottom: 20px; }
    .promo-text a.button {
      display: inline-block; background: linear-gradient(135deg, #b03574, #d4567a);
      color: #fff; padding: 16px 32px; border-radius: 50px; text-decoration: none; font-weight: 600; font-size: 18px;
      margin-top: 15px; transition: all .3s ease; box-shadow: 0 6px 20px rgba(176,53,116,.3); position: relative; overflow: hidden;
    }
    .promo-text a.button::before {
      content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.2), transparent); transition: left .5s ease;
    }
    .promo-text a.button:hover { transform: translateY(-3px); box-shadow: 0 10px 35px rgba(176,53,116,.4); }
    .promo-text a.button:hover::before { left: 100%; }

    ul { padding-left: 20px; text-align: left; margin: 15px 0; }
    li { margin: 8px 0; position: relative; }

    .bridge { margin-top: 15px; }
    .bridge ul { margin: 12px 0 0; padding-left: 20px; }
    .bridge li { margin: 6px 0; }

    .solution {
      margin-top: 25px;
      background: linear-gradient(135deg, rgba(255,246,250,.9), rgba(248,240,255,.9));
      border: 1px solid rgba(242,207,225,.5);
      border-radius: 16px; padding: 20px; backdrop-filter: blur(5px);
    }
    .solution h4 { margin: 0 0 12px 0; color: #8b2b59; font-weight: 700; font-size: 1.2rem; }
    .assurance { margin-top: 15px; font-weight: 600; color: #6e2549; padding: 15px; background: rgba(255,255,255,.5); border-radius: 12px; border-left: 4px solid #b03574; }

    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }

    @media (max-width: 768px) {
      .container { padding: 25px; margin: 10px; border-radius: 20px; }
      h1 { font-size: 1.8rem; }
      .subtitle { font-size: 1rem; }
      .checkbox-grid { grid-template-columns: 1fr; gap: 12px; }
      button { padding: 16px 24px; font-size: 16px; }
    }

    @keyframes fadeIn { from{opacity:0; transform:translateY(30px)} to{opacity:1; transform:translateY(0)} }
  </style>
</head>
<body>

  <img src="logo.png" alt="Logo da Avaliação" class="logo" />

  <div class="container" role="main">
    <h1>Autoavaliação da Inflamação</h1>
    <p class="subtitle">Marque os sintomas que você sente com frequência:</p>

    <!-- Sintomas em cards .checkbox-grid / .checkbox-item (sem <small>) -->
    <div class="checkbox-grid" id="symptom-grid">
      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Barriga inchada ou gases">
        <input id="s1" type="checkbox" class="sintoma" value="Intestino">
        <div class="checkmark"></div>
        <strong>Barriga inchada ou gases</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Constipação ou intestino solto">
        <input id="s2" type="checkbox" class="sintoma" value="Intestino">
        <div class="checkmark"></div>
        <strong>Constipação ou intestino solto</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Acne, rosácea ou pele irritada">
        <input id="s3" type="checkbox" class="sintoma" value="Pele">
        <div class="checkmark"></div>
        <strong>Acne, rosácea ou pele irritada</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="TPM intensa ou ciclo irregular">
        <input id="s4" type="checkbox" class="sintoma" value="Hormonal">
        <div class="checkmark"></div>
        <strong>TPM intensa ou ciclo irregular</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dor nas articulações">
        <input id="s5" type="checkbox" class="sintoma" value="Articulações">
        <div class="checkmark"></div>
        <strong>Dor nas articulações</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Cansaço excessivo ou névoa mental">
        <input id="s6" type="checkbox" class="sintoma" value="Cérebro">
        <div class="checkmark"></div>
        <strong>Cansaço excessivo ou névoa mental</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Enjoo com alimentos gordurosos">
        <input id="s7" type="checkbox" class="sintoma" value="Fígado">
        <div class="checkmark"></div>
        <strong>Enjoo com alimentos gordurosos</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dificuldade para dormir ou sono não reparador">
        <input id="s8" type="checkbox" class="sintoma" value="Sono">
        <div class="checkmark"></div>
        <strong>Dificuldade para dormir ou sono não reparador</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dificuldade em perder peso">
        <input id="s9" type="checkbox" class="sintoma" value="Metabolismo">
        <div class="checkmark"></div>
        <strong>Dificuldade em perder peso</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Gordura na região abdominal">
        <input id="s10" type="checkbox" class="sintoma" value="Inflamação hormonal">
        <div class="checkmark"></div>
        <strong>Gordura na região abdominal</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Acorda muito para fazer xixi">
        <input id="s11" type="checkbox" class="sintoma" value="Rins">
        <div class="checkmark"></div>
        <strong>Acorda muito para fazer xixi</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Candidíase">
        <input id="s12" type="checkbox" class="sintoma" value="Microbiota">
        <div class="checkmark"></div>
        <strong>Candidíase</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Infecção urinária">
        <input id="s13" type="checkbox" class="sintoma" value="Urinário">
        <div class="checkmark"></div>
        <strong>Infecção urinária</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dores de cabeça">
        <input id="s14" type="checkbox" class="sintoma" value="Neurológico">
        <div class="checkmark"></div>
        <strong>Dores de cabeça</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Dor no corpo">
        <input id="s15" type="checkbox" class="sintoma" value="Muscular/Imune">
        <div class="checkmark"></div>
        <strong>Dor no corpo</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Alergias">
        <input id="s16" type="checkbox" class="sintoma" value="Imunológico">
        <div class="checkmark"></div>
        <strong>Alergias</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Ressecamento vaginal">
        <input id="s17" type="checkbox" class="sintoma" value="Hormonal">
        <div class="checkmark"></div>
        <strong>Ressecamento vaginal</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Baixa libido">
        <input id="s18" type="checkbox" class="sintoma" value="Hormonal">
        <div class="checkmark"></div>
        <strong>Baixa libido</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Língua esbranquiçada">
        <input id="s19" type="checkbox" class="sintoma" value="Digestivo">
        <div class="checkmark"></div>
        <strong>Língua esbranquiçada</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Unha quebradiça">
        <input id="s20" type="checkbox" class="sintoma" value="Absorção de vitaminas">
        <div class="checkmark"></div>
        <strong>Unha quebradiça</strong>
      </div>

      <div class="checkbox-item" onclick="toggleSymptomCard(this)" data-text="Queda de cabelo">
        <input id="s21" type="checkbox" class="sintoma" value="Tireoide">
        <div class="checkmark"></div>
        <strong>Queda de cabelo</strong>
      </div>
    </div>

    <button onclick="avaliarInflamacao()" aria-label="Avaliar nível de inflamação">✨ Avaliar Minha Inflamação</button>

    <div class="result" id="resultado" aria-live="polite"></div>

    <div class="promo-text" id="promo-section" style="display: none;">
      <p>Eu vou te conduzir com jejum + alimentação correta para desinflamar e recuperar seu controle hormonal.</p>
      <ul>
        <li>Jejum como <strong>anti-inflamatório natural</strong> — aplicado com segurança e estratégia.</li>
        <li><strong>Quantidade certa para você</strong>: você vai saber exatamente quanto comer usando a TATA, minha calculadora inteligente que monta suas refeições.</li>
      </ul>
      <a
        id="cta-jejum"
        href="https://renataborbanutri.github.io/jejum/?utm_source=autoavaliacao&utm_medium=cta_main&utm_campaign=jaf"
        target="_blank"
        class="button"
        aria-label="Quero meu plano para desinflamar com o JAFE"
      >
        👉 Quero desinflamar agora
      </a>
    </div>
  </div>

  <script>
    // Handler para os cards de sintomas no novo layout
    function toggleSymptomCard(element) {
      const input = element.querySelector('input.sintoma');
      input.checked = !input.checked;
      element.classList.toggle('selected', input.checked);
    }

    function mensagemPonte(nivel) {
      if (nivel.includes("Leve")) return "";
      if (nivel.includes("Moderada")) return "";
      return `
        <h2>Consequências de adiar o cuidado:</h2>
        <ul>
          <li>Maior resistência à insulina e acúmulo de gordura visceral.</li>
          <li>Hormônios descontrolados na pré-menopausa, menopausa ou pós menopausa.</li>
          <li>Fadiga constante e névoa mental que afetam o foco.</li>
          <li>Sono leve/irregular, com despertares noturnos.</li>
          <li>Pele mais reativa e intestino instável.</li>
          <li>Risco crescente de síndrome metabólica.</li>
          <li>Dores articulares mais frequentes e recuperação lenta.</li>
        </ul>
      `;
    }

    function bridgeLabel(nivel) {
      return ""; // sem rótulo adicional
    }

    // Plano de ação dinâmico conforme sistemas marcados
    function planoAcao(sistemasSet) {
      const itens = [];
      itens.push("Jejum estruturado e progressivo adequado ao seu nível atual.");
      if (sistemasSet.has("Intestino") || sistemasSet.has("Microbiota") || sistemasSet.has("Digestivo")) itens.push("Reset intestinal: mais fibras, água, fermentados naturais e redução de gatilhos inflamatórios.");
      if (sistemasSet.has("Sono")) itens.push("Higiene do sono: rotina noturna e ajustes de jejum para melhorar melatonina e recuperação.");
      if (sistemasSet.has("Metabolismo") || sistemasSet.has("Inflamação hormonal") || sistemasSet.has("Tireoide")) itens.push("Controle hormonal e glicêmico: janela alimentar, proteína 'âncora' e combinação certa de macros.");
      if (sistemasSet.has("Fígado")) itens.push("Suporte hepático via alimentação: menos ultraprocessados, ajustes de gordura e intervalos corretos.");
      if (sistemasSet.has("Articulações") || sistemasSet.has("Muscular/Imune")) itens.push("Anti-inflamatório com jejum e alimentação correta.");
      if (sistemasSet.has("Cérebro") || sistemasSet.has("Neurológico")) itens.push("Clareza mental e energia: janelas estáveis, hidratação e refeições corretas para te dar energia e clareza mental.");
      if (sistemasSet.has("Urinário") || sistemasSet.has("Rins")) itens.push("Jejum é o melhor Anti-inflamatório que existe.");
      if (sistemasSet.has("Absorção de vitaminas")) itens.push("Mudanças alimentares para otimizar a absorção de vitaminas e minerais vindos dos alimentos.");
      if (sistemasSet.has("Pele")) itens.push("Pele mais calma: cuidados para equilibrar seu corpo e desinflamar de dentro para fora.");
      return itens.map(t => `<li>${t}</li>`).join("");
    }

    function avaliarInflamacao() {
      const sintomasMarcados = document.querySelectorAll('.sintoma:checked');
      const numSintomas = sintomasMarcados.length;

      if (numSintomas === 0) {
        document.getElementById('resultado').innerHTML = "<strong>Marque pelo menos um sintoma para avaliar.</strong>";
        document.getElementById('promo-section').style.display = "none";
        return;
      }

      let nivel = "", mensagem = "";
      if (numSintomas <= 2) {
        nivel = "Leve 💛";
        mensagem = "Seu corpo está mostrando sinais leves. A prevenção é o melhor caminho!";
      } else if (numSintomas <= 3) {
        nivel = "Moderada 🟠";
        mensagem = "A inflamação está se espalhando. É hora de cuidar de você com mais atenção.";
      } else {
        nivel = "Alta 🔴";
        mensagem = "Sinais de inflamação sistêmica! Vamos aliviar essa sobrecarga e restaurar seu equilíbrio.";
      }

      const sistemas = [];
      const sintomasTexto = [];
      sintomasMarcados.forEach(s => {
        sistemas.push(s.value);
        const card = s.closest('.checkbox-item');
        const texto = (card?.getAttribute('data-text')) ||
                      (card?.querySelector('strong')?.innerText.trim()) ||
                      s.parentElement.innerText.trim();
        sintomasTexto.push(texto);
      });

      const unicosSistemas = [...new Set(sistemas)].join(', ');
      const listaSintomas = sintomasTexto.join(', ');
      const ponte = mensagemPonte(nivel);

      document.getElementById('resultado').innerHTML = `
        <h3>Resultado:</h3>
        <p><strong>Nível de inflamação:</strong> ${nivel}</p>
        <p>${mensagem}</p>
        <p><strong>Possíveis órgãos ou sistemas afetados:</strong> ${unicosSistemas}</p>
        <p><strong>Sintomas identificados:</strong> ${listaSintomas}</p>

        <div class="bridge">${bridgeLabel(nivel) ? `<strong>${bridgeLabel(nivel)}</strong> ` : ""}${ponte}</div>

        <div class="solution">
          <h4 class="sol-title"><span class="sol-ico" aria-hidden="true">🧭</span>Plano de ação personalizado</h4>
          <p class="sol-lead">Vamos agir em <strong>3 frentes</strong> para desinflamar e estabilizar hormônios:</p>
          <ol class="sol-steps" role="list">
            <li><strong>Jejum estruturado</strong></li>
            <li><strong>Reset intestinal</strong></li>
            <li><strong>Prato inteligente</strong> — <em>quantidade certa</em> com a <strong>TATA</strong> (proteína âncora, combinações de macros e janela alimentar).</li>
          </ol>
          <h5 class="sol-sub">Ajustes finos para o seu caso</h5>
          <ul id="plano-ul" class="sol-list"></ul>
          <p class="assurance">Dentro do JAFE eu te guio na prática — do jejum certo ao prato certo, com segurança, constância e ajustes semanais até seu corpo responder.</p>
        </div>
      `;

      const ul = document.getElementById('plano-ul');
      if (ul) ul.innerHTML = planoAcao(new Set(sistemas));

      document.getElementById('promo-section').style.display = "block";
    }
  </script>

</body>
</html>
